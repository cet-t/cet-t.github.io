<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rng - crates.io: Rust package registry</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500;600&family=Source+Serif+4:wght@400;600&family=JetBrains+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="https://github.com/cet-t.png" />
    <style>
      :root {
        --crates-bg: #262626;
        --crates-surface: #353535;
        --crates-orange: #f46623;
        --crates-text: #ddd;
        --crates-text-dim: #999;
        --crates-link: #d2991d;
        --crates-border: #444;
        --crates-card: #2b2b2b;
        --docs-border: #444;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: var(--crates-bg);
        color: var(--crates-text);
        font-family: "Fira Sans", sans-serif;
        line-height: 1.6;
        min-height: 100vh;
      }

      /* Nav Header */
      header {
        background-color: var(--crates-surface);
        border-bottom: 1px solid var(--crates-border);
        padding: 0.8rem 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .header-logo {
        color: var(--crates-orange);
        font-size: 1.8rem;
        text-decoration: none;
      }

      .search-container {
        position: relative;
      }

      .search-bar {
        background: #454545;
        border: 1px solid #555;
        border-radius: 4px;
        padding: 6px 12px;
        width: 400px;
        color: white;
        outline: none;
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: #313131;
        border: 1px solid var(--crates-border);
        border-top: none;
        border-radius: 0 0 4px 4px;
        z-index: 100;
        display: none;
        max-height: 300px;
        overflow-y: auto;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
      }

      .search-result-item {
        padding: 10px 15px;
        cursor: pointer;
        border-bottom: 1px solid #444;
        font-size: 0.9rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .search-result-item:hover,
      .search-result-item.selected {
        background: var(--crates-orange);
        color: white;
      }

      .search-result-item .item-type {
        font-size: 0.7rem;
        background: rgba(255, 255, 255, 0.1);
        padding: 2px 6px;
        border-radius: 3px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      /* Crate Hero Area */
      .crate-header {
        background-color: #313131;
        padding: 3rem 0 0;
        border-bottom: 1px solid var(--crates-border);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      .crate-title-row {
        display: flex;
        align-items: flex-end;
        gap: 15px;
        margin-bottom: 2rem;
      }

      .crate-name {
        font-family: "Source Serif 4", serif;
        font-size: 3rem;
        font-weight: 600;
        color: #fff;
      }

      .crate-version {
        font-size: 1.2rem;
        color: var(--crates-text-dim);
        margin-bottom: 8px;
      }

      /* Main Content Layout */
      .main-layout {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 40px;
        padding: 40px 0;
      }

      /* Content Area (Readme) */
      .readme-content h2 {
        font-family: "Source Serif 4", serif;
        font-size: 1.8rem;
        margin: 2.5rem 0 1rem;
        border-bottom: 1px solid var(--crates-border);
        padding-bottom: 5px;
        color: #fff;
      }

      .readme-content p {
        margin-bottom: 1.2rem;
        color: var(--crates-text);
      }

      .readme-content ul {
        margin-bottom: 1.2rem;
        margin-left: 1.5rem;
      }

      /* Code Blocks */
      .pre {
        background: #1d1f21 !important; /* Official Coal background */
        padding: 1.2rem;
        border-radius: 6px;
        border: 1px solid var(--crates-border);
        overflow-x: auto;
        margin: 1.5rem 0;
        color: #c5c8c6 !important;
      }

      code {
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
      }

      .keyword {
        color: #b294bb !important;
      }
      .type {
        color: #81a2be !important;
      }
      .method {
        color: #b5bd68 !important;
      }
      .comment {
        color: #969896 !important;
        font-style: italic !important;
      }

      /* Sidebar Styling */
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 30px;
      }

      .sidebar-section h3 {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: var(--crates-text-dim);
        border-bottom: 1px solid var(--crates-border);
        padding-bottom: 8px;
        margin-bottom: 12px;
      }

      .sidebar-link {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--crates-link);
        text-decoration: none;
        font-size: 0.95rem;
        margin-bottom: 8px;
      }

      .sidebar-link:hover {
        text-decoration: underline;
      }

      .install-box {
        background: #111;
        padding: 12px;
        border-radius: 4px;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.85rem;
        color: #ccc;
        border: 1px solid #333;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
      }

      .install-box:hover {
        border-color: var(--crates-orange);
      }

      /* Labels / Badges */
      .label {
        background: #3a3a3a;
        color: #ddd;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        margin-right: 5px;
      }

      .owner-link {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        text-decoration: none;
        color: inherit;
        transition: opacity 0.2s;
        width: fit-content;
      }

      .owner-link:hover {
        opacity: 0.8;
      }

      /* Responsive */
      @media (max-width: 900px) {
        .main-layout {
          grid-template-columns: 1fr;
        }
        .sidebar {
          order: -1;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-left">
        <a href="../index.html" class="header-logo"
          ><i class="fas fa-box-open"></i
        ></a>
        <div class="search-container">
          <input
            type="text"
            id="search-input"
            class="search-bar"
            placeholder="Search for boxes or API..."
            autocomplete="off"
          />
          <div id="search-results" class="search-results"></div>
        </div>
      </div>
    </header>

    <div class="crate-header">
      <div class="container">
        <div class="crate-title-row">
          <span class="crate-name">rng</span>
          <span class="crate-version" id="current-version">v0.5.4</span>
          <span class="label">MIT / Apache-2.0</span>
        </div>
      </div>
    </div>

    <main class="container">
      <div class="main-layout">
        <article class="readme-content">
          <p>
            RNG
            Packは、Rustで実装された擬似乱数生成器（PRNG）のコレクションです。
            RustとCの両方（FFI経由）をサポートし、高効率な実装を提供します。
          </p>

          <h2>サポートされている生成器</h2>
          <ul>
            <li>
              <strong>Mersenne Twister</strong>: 32-bit (Mt19937) / 64-bit
              (Mt1993764)
            </li>
            <li>
              <strong>PCG</strong>: Pcg32 (Permuted Congruential Generator)
            </li>
            <li>
              <strong>Philox</strong>: 4x32 (Philox32) / 2x64 (Philox64) -
              カウンタベース
            </li>
            <li><strong>Twisted GFSR</strong>: TwistedGFSR</li>
            <li><strong>Xorshift</strong>: 32, 64, 128-bit</li>
          </ul>

          <h2>使用例 (Rust)</h2>
          <pre
            class="pre"
          ><code><span class="keyword">use</span> <span class="type">rng_pack</span>::mt19937::<span class="type">Mt19937</span>;

<span class="keyword">fn</span> <span class="method">main</span>() {
    <span class="comment">// シード値で初期化</span>
    <span class="keyword">let mut</span> rng = <span class="type">Mt19937</span>::<span class="method">new</span>(12345);

    <span class="comment">// u32の乱数を生成</span>
    <span class="keyword">let</span> val = rng.<span class="method">nextu</span>();
    
    <span class="comment">// [0, 1) の範囲でf32を生成</span>
    <span class="keyword">let</span> f_val = rng.<span class="method">nextf</span>();
}</code></pre>

          <h2>C API</h2>
          <p>
            すべての生成器は、共有ライブラリとして使用できるようにC互換の関数をエクスポートしています。
          </p>
          <pre class="pre"><code><span class="comment">// MT19937の例</span>
<span class="keyword">void</span>* <span class="method">mt19937_new</span>(uint32_t seed);
<span class="keyword">void</span> <span class="method">mt19937_next_u32s</span>(<span class="keyword">void</span>* ptr, uint32_t* out, size_t count);
<span class="keyword">void</span> <span class="method">mt19937_free</span>(<span class="keyword">void</span>* ptr);</code></pre>
        </article>

        <aside class="sidebar">
          <div class="sidebar-section">
            <h3>Install</h3>
            <div class="install-box">
              <span id="install-text">rng-pack = "0.1.0"</span>
              <i class="far fa-copy"></i>
            </div>
          </div>

          <div class="sidebar-section">
            <h3>Documentation</h3>
            <a href="https://docs.rs/rng-pack" class="sidebar-link"
              ><i class="fas fa-external-link-alt"></i> docs.rs</a
            >
          </div>

          <div class="sidebar-section">
            <h3>Repository</h3>
            <a href="https://github.com/cet-t/rng" class="sidebar-link"
              ><i class="fab fa-github"></i> cet-t/rng</a
            >
          </div>

          <div class="sidebar-section">
            <h3>Owners</h3>
            <a
              href="https://github.com/cet-t"
              class="owner-link"
              target="_blank"
            >
              <img
                src="https://github.com/cet-t.png"
                style="width: 32px; height: 32px; border-radius: 4px"
              />
              <span style="font-size: 0.9rem; align-self: center">cet-t</span>
            </a>
          </div>
        </aside>
      </div>
    </main>

    <script>
      const searchData = [
        { name: "unilox", type: "Project", url: "../unilox/ja/about.html" },
        { name: "rng", type: "Project", url: "about.html" },
        { name: "Mt19937", type: "Algorithm", url: "about.html" },
        { name: "Philox", type: "Algorithm", url: "about.html" },
        { name: "Xorshift", type: "Algorithm", url: "about.html" },
      ];

      const searchInput = document.getElementById("search-input");
      const searchResults = document.getElementById("search-results");

      searchInput.addEventListener("input", (e) => {
        const query = e.target.value.toLowerCase();
        if (!query) {
          searchResults.style.display = "none";
          return;
        }

        const filtered = searchData.filter(
          (item) =>
            item.name.toLowerCase().includes(query) ||
            item.type.toLowerCase().includes(query),
        );

        if (filtered.length > 0) {
          searchResults.innerHTML = filtered
            .map(
              (item) => `
            <div class="search-result-item" onclick="window.location.href='${item.url}'">
              <span>${item.name}</span>
              <span class="item-type">${item.type}</span>
            </div>
          `,
            )
            .join("");
          searchResults.style.display = "block";
        } else {
          searchResults.style.display = "none";
        }
      });

      // Version Sync
      async function syncVersion() {
        try {
          const response = await fetch(
            "https://crates.io/api/v1/crates/rng-pack",
          );
          if (response.ok) {
            const data = await response.json();
            const ver = data.crate.max_version;
            document.getElementById("current-version").textContent = "v" + ver;
            document.getElementById("install-text").textContent =
              `rng-pack = "${ver}"`;
          }
        } catch (e) {
          console.warn("Sync failed", e);
        }
      }
      syncVersion();
    </script>
  </body>
</html>
